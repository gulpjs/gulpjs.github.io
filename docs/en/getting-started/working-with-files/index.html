<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Working with Files · gulp.js</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="# Working with Files"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Working with Files · gulp.js"/><meta property="og:type" content="website"/><meta property="og:url" content="https://gulpjs.com//index.html"/><meta property="og:description" content="# Working with Files"/><meta name="twitter:card" content="summary"/><link rel="shortcut icon" href="/img/favicon.png"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/tomorrow-night.min.css"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-128126650-1"></script><script>
              window.dataLayer = window.dataLayer || [];
              function gtag(){dataLayer.push(arguments); }
              gtag('js', new Date());
              gtag('config', 'UA-128126650-1');
            </script><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><link rel="stylesheet" href="/css/main.css"/></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/gulp.svg" alt="gulp.js"/></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/docs/en/getting-started/quick-start" target="_self">Getting Started</a></li><li class="siteNavGroupActive"><a href="/docs/en/api/concepts" target="_self">API</a></li><li class=""><a href="https://gulpjs.com/plugins" target="_self">Plugins</a></li><li class=""><a href="https://twitter.com/gulpjs" target="_self">Twitter</a></li><li class=""><a href="https://github.com/gulpjs/gulp/blob/master/CONTRIBUTING.md" target="_self">Contribute</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>Getting Started</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Getting Started</h3><ul><li class="navListItem"><a class="navItem" href="/docs/en/getting-started/quick-start">Quick Start</a></li><li class="navListItem"><a class="navItem" href="/docs/en/getting-started/javascript-and-gulpfiles">JavaScript and Gulpfiles</a></li><li class="navListItem"><a class="navItem" href="/docs/en/getting-started/creating-tasks">Creating Tasks</a></li><li class="navListItem"><a class="navItem" href="/docs/en/getting-started/async-completion">Async Completion</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/en/getting-started/working-with-files">Working with Files</a></li><li class="navListItem"><a class="navItem" href="/docs/en/getting-started/explaining-globs">Explaining Globs</a></li><li class="navListItem"><a class="navItem" href="/docs/en/getting-started/using-plugins">Using Plugins</a></li><li class="navListItem"><a class="navItem" href="/docs/en/getting-started/watching-files">Watching Files</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">API</h3><ul><li class="navListItem"><a class="navItem" href="/docs/en/api/concepts">Concepts</a></li><li class="navListItem"><a class="navItem" href="/docs/en/api/src">src()</a></li><li class="navListItem"><a class="navItem" href="/docs/en/api/dest">dest()</a></li><li class="navListItem"><a class="navItem" href="/docs/en/api/symlink">symlink()</a></li><li class="navListItem"><a class="navItem" href="/docs/en/api/lastrun">lastRun()</a></li><li class="navListItem"><a class="navItem" href="/docs/en/api/series">series()</a></li><li class="navListItem"><a class="navItem" href="/docs/en/api/parallel">parallel()</a></li><li class="navListItem"><a class="navItem" href="/docs/en/api/watch">watch()</a></li><li class="navListItem"><a class="navItem" href="/docs/en/api/task">task()</a></li><li class="navListItem"><a class="navItem" href="/docs/en/api/registry">registry()</a></li><li class="navListItem"><a class="navItem" href="/docs/en/api/tree">tree()</a></li><li class="navListItem"><a class="navItem" href="/docs/en/api/vinyl">Vinyl</a></li><li class="navListItem"><a class="navItem" href="/docs/en/api/vinyl-isvinyl">Vinyl.isVinyl()</a></li><li class="navListItem"><a class="navItem" href="/docs/en/api/vinyl-iscustomprop">Vinyl.isCustomProp()</a></li></ul></div></div></section></div><script>
            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              const headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                if (event.target.tagName === 'A') {
                  document.body.classList.remove('tocActive');
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docMainContainer"><div class="wrapper"><div class="post"><header class="postHeader"></header><article><div><span><h1><a class="anchor" aria-hidden="true" id="working-with-files"></a><a href="#working-with-files" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Working with Files</h1>
<p>The <code>src()</code> and <code>dest()</code> methods are exposed by gulp to interact with files on your computer.</p>
<p><code>src()</code> is given a <a href="/docs/en/getting-started/explaining-globs">glob</a> to read from the file system and produces a <a href="https://nodejs.org/api/stream.html">Node stream</a>. It locates all matching files and reads them into memory to pass through the stream.</p>
<p>The stream produced by <code>src()</code> should be returned from a task to signal async completion, as mentioned in <a href="/docs/en/getting-started/creating-tasks">Creating Tasks</a>.</p>
<pre><code class="hljs css language-js"><span class="hljs-keyword">const</span> { src, dest } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'gulp'</span>);

exports.default = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">return</span> src(<span class="hljs-string">'src/*.js'</span>)
    .pipe(dest(<span class="hljs-string">'output/'</span>));
}
</code></pre>
<p>The main API of a stream is the <code>.pipe()</code> method for chaining Transform or Writable streams.</p>
<pre><code class="hljs css language-js"><span class="hljs-keyword">const</span> { src, dest } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'gulp'</span>);
<span class="hljs-keyword">const</span> babel = <span class="hljs-built_in">require</span>(<span class="hljs-string">'gulp-babel'</span>);

exports.default = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">return</span> src(<span class="hljs-string">'src/*.js'</span>)
    .pipe(babel())
    .pipe(dest(<span class="hljs-string">'output/'</span>));
}
</code></pre>
<p><code>dest()</code> is given an output directory string and also produces a <a href="https://nodejs.org/api/stream.html">Node stream</a> which is generally used as a terminator stream. When it receives a file passed through the pipeline, it writes the contents and other details out to the filesystem at a given directory.  The <code>symlink()</code> method is also available and operates like <code>dest()</code>, but creates links instead of files (see <a href="/docs/en/api/symlink"><code>symlink()</code></a> for details).</p>
<p>Most often plugins will be placed between <code>src()</code> and <code>dest()</code> using the <code>.pipe()</code> method and will transform the files within the stream.</p>
<h2><a class="anchor" aria-hidden="true" id="adding-files-to-the-stream"></a><a href="#adding-files-to-the-stream" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Adding files to the stream</h2>
<p><code>src()</code> can also be placed in the middle of a pipeline to add files to the stream based on the given globs. The additional files will only be available to transformations later in the stream.  If <a href="/docs/en/getting-started/explaining-globs#overlapping-globs">globs overlap</a>, the files will be added again.</p>
<p>This can be useful for transpiling some files before adding plain JavaScript files to the pipeline and uglifying everything.</p>
<pre><code class="hljs css language-js"><span class="hljs-keyword">const</span> { src, dest } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'gulp'</span>);
<span class="hljs-keyword">const</span> babel = <span class="hljs-built_in">require</span>(<span class="hljs-string">'gulp-babel'</span>);
<span class="hljs-keyword">const</span> uglify = <span class="hljs-built_in">require</span>(<span class="hljs-string">'gulp-uglify'</span>);

exports.default = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">return</span> src(<span class="hljs-string">'src/*.js'</span>)
    .pipe(babel())
    .pipe(src(<span class="hljs-string">'vendor/*.js'</span>))
    .pipe(uglify())
    .pipe(dest(<span class="hljs-string">'output/'</span>));
}
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="output-in-phases"></a><a href="#output-in-phases" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Output in phases</h2>
<p><code>dest()</code> can be used in the middle of a pipeline to write intermediate states to the filesystem. When a file is received, the current state is written out to the filesystem, the path is updated to represent the new location of the output file, then that file continues down the pipeline.</p>
<p>This feature can be useful to create unminified and minified files with the same pipeline.</p>
<pre><code class="hljs css language-js"><span class="hljs-keyword">const</span> { src, dest } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'gulp'</span>);
<span class="hljs-keyword">const</span> babel = <span class="hljs-built_in">require</span>(<span class="hljs-string">'gulp-babel'</span>);
<span class="hljs-keyword">const</span> uglify = <span class="hljs-built_in">require</span>(<span class="hljs-string">'gulp-uglify'</span>);
<span class="hljs-keyword">const</span> rename = <span class="hljs-built_in">require</span>(<span class="hljs-string">'gulp-rename'</span>);

exports.default = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">return</span> src(<span class="hljs-string">'src/*.js'</span>)
    .pipe(babel())
    .pipe(src(<span class="hljs-string">'vendor/*.js'</span>))
    .pipe(dest(<span class="hljs-string">'output/'</span>))
    .pipe(uglify())
    .pipe(rename({ <span class="hljs-attr">extname</span>: <span class="hljs-string">'.min.js'</span> }))
    .pipe(dest(<span class="hljs-string">'output/'</span>));
}
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="modes-streaming-buffered-and-empty"></a><a href="#modes-streaming-buffered-and-empty" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Modes: streaming, buffered, and empty</h2>
<p><code>src()</code> can operate in three modes: buffering, streaming, and empty. These are configured with the <code>buffer</code> and <code>read</code> <a href="/docs/en/api/src#options">options</a> on <code>src()</code>.</p>
<ul>
<li>Buffering mode is the default and loads the file contents into memory. Plugins usually operate in buffering mode and many don't support streaming mode.</li>
<li>Streaming mode exists mainly to operate on large files that can't fit in memory, like giant images or movies. The contents are streamed from the filesystem in small chunks instead of loaded all at once. If you need to use streaming mode, look for a plugin that supports it or write your own.</li>
<li>Empty mode contains no contents and is useful when only working with file metadata.</li>
</ul>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/en/getting-started/async-completion"><span class="arrow-prev">← </span><span>Previous</span></a><a class="docs-next button" href="/docs/en/getting-started/explaining-globs"><span>Next</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav docOnPageNav"><ul class="toc-headings"><li><a href="#adding-files-to-the-stream">Adding files to the stream</a></li><li><a href="#output-in-phases">Output in phases</a></li><li><a href="#modes-streaming-buffered-and-empty">Modes: streaming, buffered, and empty</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/gulp.svg" alt="gulp.js" width="66" height="58"/></a><div><h5>Docs</h5><a href="/docs/en/getting-started/quick-start">Getting Started</a><a href="/docs/en/api/concepts">API Reference</a></div><div><h5>Community</h5><a href="https://stackoverflow.com/questions/tagged/gulp" target="_blank" rel="noreferrer noopener">Stack Overflow</a><a href="https://twitter.com/gulpjs" target="_blank" rel="noreferrer noopener">Twitter</a></div><div><h5>More</h5><a href="https://github.com/gulpjs/gulp">GitHub</a><a class="github-button" href="https://github.com/gulpjs/gulp" data-icon="octicon-star" data-count-href="/gulpjs/gulp/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section><section class="copyright">Copyright © 2018 GulpJS</section></footer></div></body></html>